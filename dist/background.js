function onInit(){updateTicker(),chrome.alarms.create("btc-ticker-watchdog",{periodInMinutes:1});const n="binance_menu_item",c="changelly_menu_item";chrome.contextMenus.create({id:n,title:chrome.i18n.getMessage("binance_link_title"),contexts:["browser_action"]}),chrome.contextMenus.create({id:c,title:chrome.i18n.getMessage("changelly_link_title"),contexts:["browser_action"]}),chrome.contextMenus.onClicked.addListener((e,t)=>{let r=null;e.menuItemId==n?r=BINANCE_URL:e.menuItemId==c&&(r=CHANGELLY_URL),r&&chrome.tabs.create({url:r})})}async function updateTicker(){[priceResp]=await Promise.all([fetch("https://api.binance.com/api/v3/ticker/24hr",{cache:"no-store"})]);const e=await priceResp.json();var t=e.filter(e=>"BTCUSDT"===e.symbol);const r=Math.trunc(t[0].lastPrice);let n=r.toString();1e4<r&&(to_trunc=(e,t)=>Math.floor(e*Math.pow(10,t))/Math.pow(10,t),n=Number.parseFloat(to_trunc(r/1e3,1)).toPrecision(3)+"k");r.toLocaleString();const c=await fetch("https://api.coindcx.com/exchange/ticker"),o=await c.json();var i=o.filter(e=>"BTCINR"===e.market);const a=await fetch("https://api.coindesk.com/v1/bpi/currentprice.json");var s=await a.json(),s=Math.trunc(s.bpi.EUR.rate_float),s=""+chrome.i18n.getMessage("tooltip_price_title")+`
 Bitcoin Price
    
${new Intl.NumberFormat("hi",{style:"currency",currency:"INR"}).format(i[0].last_price)}
${new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t[0].lastPrice)}
${chrome.i18n.getMessage("tooltip_price_yesterday")}${new Intl.NumberFormat("eu-ES",{style:"currency",currency:"EUR"}).format(s)}
    
 Click on the icon to see more`;chrome.browserAction.setBadgeText({text:n}),chrome.browserAction.setBadgeBackgroundColor({color:"#22750B"}),chrome.browserAction.setTitle({title:s})}function onAlarm(e){updateTicker()}chrome.runtime.onInstalled.addListener(onInit),chrome.alarms.onAlarm.addListener(onAlarm),chrome.runtime.setUninstallURL&&chrome.runtime.setUninstallURL("https://extension-feedback.netlify.app/");